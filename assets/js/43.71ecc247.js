(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{543:function(s,a,t){"use strict";t.r(a);var e=t(4),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("（再次）又到了一年一度的云服务器过期时间，搬迁和环境搭建又得重搞一下了。这回是 php, mysql 和 wordpress.")]),s._v(" "),t("h2",{attrs:{id:"原配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#原配置"}},[s._v("#")]),s._v(" 原配置")]),s._v(" "),t("p",[s._v("使用了秋水逸冰的 lamp.sh, 文档和相关目录见 https://lamp.sh/faq.html")]),s._v(" "),t("h2",{attrs:{id:"mysql8"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql8"}},[s._v("#")]),s._v(" MySQL8")]),s._v(" "),t("p",[s._v("首先 phpmyadmin 进不去。发现是权限问题。目录权限需改 755")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cd /data/www/default/\nchmod -R 755 phpmyadmin\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("然后是密码忘记了，需要重置 MySQL 的密码。由于 MySQL8 的修改方式有变，百度的几种方法都不适用。")]),s._v(" "),t("div",{staticClass:"language-s line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("vi /etc/my.cnf\n# [mysqld]后加入\nskip-grant-tables\n\n#重启\nservice mysqld restart\n\nmysql -u root -p\n# 回车 这样可以免密码登录，但是修改手段都会被禁止\nFLUSH PRIVILEGES;\nALTER USER 'root'@'localhost' IDENTIFIED BY '123456';\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("详细见"),t("a",{attrs:{href:"https://dev.mysql.com/doc/refman/8.0/en/resetting-permissions.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"备份-wordpress-文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#备份-wordpress-文件"}},[s._v("#")]),s._v(" 备份 wordpress 文件")]),s._v(" "),t("p",[s._v("/data/www/default 全部文件拷贝")])])}),[],!1,null,null,null);a.default=n.exports}}]);