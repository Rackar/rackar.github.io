(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{512:function(_,v,e){"use strict";e.r(v);var t=e(4),a=Object(t.a)({},(function(){var _=this,v=_.$createElement,e=_._self._c||v;return e("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[e("p",[_._v("今天给大家介绍一个自己编写的小软件。")]),_._v(" "),e("p",[_._v("软件主要功能就是从文章自动生成视频，简称垃圾视频制造机。")]),_._v(" "),e("h2",{attrs:{id:"缘由"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#缘由"}},[_._v("#")]),_._v(" 缘由")]),_._v(" "),e("p",[_._v("先讲一下缘由吧。")]),_._v(" "),e("p",[_._v("我最喜欢的在世作家叫连岳，他的现阶段文章主要以时评、解答问题和传达智识为主。")]),_._v(" "),e("p",[_._v("关注了他十多年的经验和教训告诉我，如果早能理解并执行他传递的理念，我的资产比现在要翻倍 3-4 倍，生活和选择也会截然不同。都怪以前太年轻了。")]),_._v(" "),e("p",[_._v("由于有些涉及敏感话题的文章常被删，我做了个文章备份网站存放连岳的文章(www.lianyue4u.com)，点击率虽然惨淡，但是还是有同好再关注。")]),_._v(" "),e("p",[_._v("某天突发奇想，把文章朗读出来配上视频，应该可以更广泛的传播。毕竟微信里各种低智视频都在疯传，还深得中老年人喜爱。")]),_._v(" "),e("p",[_._v("为什么不能让更有价值的理念用视频的形式去广泛传播呢？")]),_._v(" "),e("h2",{attrs:{id:"说干就干"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#说干就干"}},[_._v("#")]),_._v(" 说干就干")]),_._v(" "),e("p",[_._v("第一步 把音频朗读出来。")]),_._v(" "),e("p",[_._v("我自己去一段的读文章录下来，做一只安逸的复读机吗？")]),_._v(" "),e("p",[_._v("no，这不符合我懒惰的本质。")]),_._v(" "),e("p",[_._v("比较百度，讯飞，阿里云之后，选择了百度 AI……")]),_._v(" "),e("p",[_._v("为啥呢？当然是因为 up 主又穷又懒，选一个不要钱还代码简单的。")]),_._v(" "),e("p",[_._v("不过最近还是又添加了阿里的方式，好像效果真要好一点。")]),_._v(" "),e("p",[_._v("环境使用 Node.js ，下载 SDK，获取 token，编写请求方法。")]),_._v(" "),e("p",[_._v("请求之后为啥有一个延迟 delay 呢？因为免费的有并发数限制啦，每秒只能 2 个。为了保证成功率，加 0.6 秒延迟。")]),_._v(" "),e("p",[_._v("然后将请求回来的 MP3 文件保存在本地。")]),_._v(" "),e("p",[_._v("测试一下。(运行，播放)")]),_._v(" "),e("p",[_._v("第二步 把文章自动分段然后调用朗读")]),_._v(" "),e("p",[_._v("第三步 根据朗读的结果合并，并根据时长自动制作字幕")]),_._v(" "),e("p",[_._v("第四步 将 bgm 根据时长循环降低音量，然后合并音轨。")]),_._v(" "),e("p",[_._v("第五步 根据时长随机抽取图片库中的图像并重命名")]),_._v(" "),e("p",[_._v("第六步 将图像制作为视频，并合并音轨")]),_._v(" "),e("p",[_._v("第七步 添加字幕")]),_._v(" "),e("p",[_._v("最后来执行吧！")]),_._v(" "),e("p",[_._v("这是文章，这是朗读结果，这是字幕和语音文件，这是抽取的 bgm，最后是合成好的视频。")]),_._v(" "),e("h2",{attrs:{id:"_1-获取-key"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-获取-key"}},[_._v("#")]),_._v(" 1. 获取 key")]),_._v(" "),e("p",[_._v("在 "),e("code",[_._v("readText.js")]),_._v(" 中更改 voice 为 voiceBd 或者 voiceAli ，切换接口平台。")]),_._v(" "),e("p",[e("strong",[_._v("但切记，因为接口有并发限制，务必要到相应的平台去注册自己的 key。方法如下：")])]),_._v(" "),e("h4",{attrs:{id:"百度-ai"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#百度-ai"}},[_._v("#")]),_._v(" 百度 AI")]),_._v(" "),e("p",[_._v("注册百度 AI。")]),_._v(" "),e("p",[e("a",{attrs:{href:"https://ai.baidu.com/ai-doc/SPEECH/jk38y8gno",target:"_blank",rel:"noopener noreferrer"}},[_._v("注册申请方法"),e("OutboundLink")],1)]),_._v(" "),e("p",[_._v("按照文档，注册账号，新建应用，获取 APP_ID, API_KEY, SECRET_KEY。")]),_._v(" "),e("p",[_._v("然后填入"),e("code",[_._v("src\\baiduSpeech.js")]),_._v("中第 7 行的 client 参数。")]),_._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[_._v("var client = new AipSpeechClient(APP_ID, API_KEY, SECRET_KEY);\n")])]),_._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[_._v("1")]),e("br")])]),e("h4",{attrs:{id:"阿里-ai"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#阿里-ai"}},[_._v("#")]),_._v(" 阿里 AI")]),_._v(" "),e("p",[_._v("https://nls-portal.console.aliyun.com/applist")]),_._v(" "),e("p",[_._v("到阿里云注册，新建智能语音交互项目，开通，获取 Key 和 Secret。到"),e("code",[_._v("speechAli.js")]),_._v("文件中进行替换。")]),_._v(" "),e("h2",{attrs:{id:"_2-准备输入文件和参数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-准备输入文件和参数"}},[_._v("#")]),_._v(" 2. 准备输入文件和参数")]),_._v(" "),e("p",[_._v("执行 "),e("code",[_._v("npm i")]),_._v(" 安装依赖。还需要安装 ffmpeg 并配置系统变量 path，至命令行窗口输入 "),e("code",[_._v("ffmpeg")]),_._v(" 能找到程序为止。")]),_._v(" "),e("p",[_._v("复制 templete 目录并粘贴，重命名为如'0225'目录，修改其中的 input/input.txt 为你想要制作的文章。（如示例段落间放一个空行方便分段）。")]),_._v(" "),e("p",[_._v("然后拷贝若干横版 jpg 图片（最好 16:9）放入 0225/pic 目录用于轮播制作视频。"),e("strong",[_._v("也支持从图库中随机抽选")]),_._v("：修改 "),e("code",[_._v("src/init.js")]),_._v(" 中间中的图库地址 "),e("code",[_._v('let picAllSourceFolder = path.resolve("/picall");')]),_._v(" ，将你的图库中绝对路径填入，替换 "),e("code",[_._v("/picall")]),_._v(" （我的代码在 d 盘，图库地址为'D:/picall/')，当然要先清空在项目 0225/pic 文件夹，程序会抽选并拷入。")]),_._v(" "),e("p",[_._v("如需替换背景音乐请重命名并替换 "),e("code",[_._v("input/bgm.mp3")]),_._v("，会根据视频时长循环播放。")]),_._v(" "),e("h3",{attrs:{id:"_3-生成视频"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-生成视频"}},[_._v("#")]),_._v(" 3.生成视频")]),_._v(" "),e("p",[_._v("生成就简单了。修改 index.js 中 "),e("code",[_._v('global.config = initPath("./0226");')]),_._v("中的为你重命名后的目录如'./0225'，然后 "),e("code",[_._v("node index.js")]),_._v("。生成的结果视频为 "),e("code",[_._v("0225/merged/final.mp4")]),_._v("。")]),_._v(" "),e("h2",{attrs:{id:"todo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#todo"}},[_._v("#")]),_._v(" todo")]),_._v(" "),e("ul",[e("li",[e("p",[_._v("[ ] 美化字幕，最好动画")])]),_._v(" "),e("li",[e("p",[_._v("[x] 字幕超长遮挡")])]),_._v(" "),e("li",[e("p",[_._v("[x] 文章自动断句。")])]),_._v(" "),e("li",[e("p",[_._v("[ ] 文章自动抓取分析。")])]),_._v(" "),e("li",[e("p",[_._v("[x] 多图")])]),_._v(" "),e("li",[e("p",[_._v("[ ] 多图切换和滤镜")])]),_._v(" "),e("li",[e("p",[_._v("[ ] 片头 水印 和片尾")])])]),_._v(" "),e("p",[_._v("用什么方式：")]),_._v(" "),e("ol",[e("li",[e("p",[_._v("将片头图片作为背景图的一张。需要保证图片不循环，同时添加固定一张图片为片头。标题文字用 drawtext 或者是图片通过 svg 叠加生成。语音和字幕增加固定秒数的偏移量。（现在图片结果为 7 秒，做片头太长。）")])]),_._v(" "),e("li",[e("p",[_._v("将图片生成同尺寸视频，然后视频拼接。（图像压制多一次，性能差）。")])])]),_._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[_._v("\n")])]),_._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[_._v("1")]),e("br")])])])}),[],!1,null,null,null);v.default=a.exports}}]);